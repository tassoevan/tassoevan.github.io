{
    "componentChunkName": "component---src-templates-post-tsx",
    "path": "/2014-04-10/a-forma-mais---para-habilitar-conexoes-ao-banco-de-dados-oracle-no-php5-rodando-sobre-o-ubuntu/",
    "result": {"data":{"mdx":{"frontmatter":{"title":"A forma mais *@#$!* para habilitar conexões ao banco de dados Oracle no PHP5 rodando sobre o Ubuntu","date":"2014-04-10T15:29:52.000Z","formattedDate":"10 de abril de 2014 às 15:29"},"excerpt":"Este artigo está disponível como  um gist . Sinta-se livre para contribuir. Agradecimentos especiais para: AJ ONeal Hsiao Siyuan Primeiro…","timeToRead":1,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"A forma mais *@#$!* para habilitar conexões ao banco de dados Oracle no PHP5 rodando sobre o Ubuntu\",\n  \"date\": \"2014-04-10T15:29:52.000Z\",\n  \"published\": true\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Este artigo est\\xE1 dispon\\xEDvel como \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://gist.github.com/tassoevan/10392954\"\n  }, \"um gist\"), \". Sinta-se livre para contribuir.\"), mdx(\"p\", null, \"Agradecimentos especiais para:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://twitter.com/coolaj86\"\n  }, \"AJ ONeal\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"http://hsiaosiyuan.com/wp/\"\n  }, \"Hsiao Siyuan\"))), mdx(\"h1\", null, \"Primeiro passo: Instala\\xE7\\xE3o do cliente Oracle\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Fa\\xE7a o download do Instant Client em \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://www.oracle.com/technetwork/indexes/downloads/index.html#database\"\n  }, \"http://www.oracle.com/technetwork/indexes/downloads/index.html#database\"), \" (voc\\xEA deve ter um usu\\xE1rio registrado no site da Oracle; o registro \\xE9 gratuito). Voc\\xEA precisa dos arquivos \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"instantclient-basic-*-*.zip\"), \" e \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"instantclient-sdk-*-*.zip\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Execute os seguintes comandos no seu terminal:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ sudo su -\\n$ mkdir -p /opt/oracle/instantclient\\n$ cd /opt/oracle/instantclient\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Copie os arquivos baixados em \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/opt/oracle/instantclient\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Descompacte os arquivos executando estes comandos:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ unzip instantclient-basic-*-*.zip\\n$ unzip instantclient-sdk-*-*.zip\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Mova todos o conte\\xFAdo de \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/opt/oracle/instantclient/instantclient\"), \" para \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/opt/oracle/instantclient\"), \":\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ mv instantclient*/* ./\\n$ rmdir instantclient*/\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Durante a compila\\xE7\\xE3o do c\\xF3digo da extens\\xE3o, alguns erros podem surgir quando forem resolvidas as depend\\xEAncias de algumas libraries. Para evit\\xE1-los, fa\\xE7a:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ ln -s libclntsh.so.* libclntsh.so\\n$ ln -s libocci.so.* libocci.so\\n$ echo /opt/oracle/instantclient >> /etc/ld.so.conf\\n$ ldconfig\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Crie um diret\\xF3rio para seus arquivos de configura\\xE7\\xE3o de rede:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ mkdir -p network/admin\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Coloque os arquivos \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sqlnet.ora\"), \" e \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tnsnames.ora\"), \" em \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/opt/oracle/instantclient/network/admin\"), \".\"))), mdx(\"p\", null, \"Agora voc\\xEA tem o kit b\\xE1sico para conex\\xF5es e acesso \\xE0 SDK para compilar extens\\xF5es PHP com Oracle.\"), mdx(\"h1\", null, \"Segundo passo: Instala\\xE7\\xE3o da extens\\xE3o PHP OCI8\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Pegue todos os pacotes essenciais para baixar e compilar a partir de reposit\\xF3rios PEAR:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ apt-get install --yes php5 php5-cli php5-dev php-db php-pear\\n$ apt-get install --yes build-essential libaio1\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Requisite a instala\\xE7\\xE3o do OCI8:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ pecl install oci8\\n\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Digite \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"instantclient,/opt/oracle/instantclient\"), \" quando perguntado pelo local de instala\\xE7\\xE3o do Instant Client.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Salve este texto em \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/php5/mods-available/oci8.ini\"), \":\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"extension=oci8.so\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Ative a extens\\xE3o:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ php5enmod oci8\\n\")))), mdx(\"p\", null, \"Agora voc\\xEA tem todas as fun\\xE7\\xF5es PHP \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"oci_*\"), \" dispon\\xEDveis tanto via php-cli quanto via Apache.\"), mdx(\"h1\", null, \"Terceiro passo: Instala\\xE7\\xE3o da extens\\xE3o PHP PDO/OCI\"), mdx(\"p\", null, \"A biblioteca \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pdo_oci\"), \" est\\xE1 desatualizada, ent\\xE3o sua instala\\xE7\\xE3o \\xE9 mais \\\"engenhosa\\\".\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Corrija alguns caminhos de arquivo:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ cd /usr/include/\\n$ ln -s php5 php\\n$ cd /opt/oracle/instantclient\\n$ mkdir -p include/oracle/11.1/\\n$ cd include/oracle/11.1/\\n$ ln -s ../../../sdk/include client\\n$ cd -\\n$ mkdir -p lib/oracle/11.1/client\\n$ cd lib/oracle/11.1/client\\n$ ln -s ../../../../ lib\\n$ cd -\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Baixe a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pdo_oci\"), \" via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pecl\"), \":\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ pecl channel-update pear.php.net\\n$ mkdir -p /tmp/pear/download/\\n$ cd /tmp/pear/download/\\n$ pecl download pdo_oci\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Extraia o c\\xF3digo-fonte:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ tar xvf PDO_OCI*.tgz\\n$ cd PDO_OCI*\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Crie um arquivo chamado \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config.m4.patch\"), \":\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"*** config.m4   2005-09-24 17:23:24.000000000 -0600\\n--- /home/myuser/Desktop/PDO_OCI-1.0/config.m4  2009-07-07 17:32:14.000000000 -0600\\n***************\\n*** 7,12 ****\\n--- 7,14 ----\\n    if test -s \\\"$PDO_OCI_DIR/orainst/unix.rgs\\\"; then\\n      PDO_OCI_VERSION=`grep '\\\"ocommon\\\"' $PDO_OCI_DIR/orainst/unix.rgs | sed 's/[ ][ ]*/:/g' | cut -d: -f 6 | cut -c 2-4`\\n      test -z \\\"$PDO_OCI_VERSION\\\" && PDO_OCI_VERSION=7.3\\n+   elif test -f $PDO_OCI_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.11.1; then\\n+     PDO_OCI_VERSION=11.1\\n    elif test -f $PDO_OCI_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then\\n      PDO_OCI_VERSION=10.1\\n    elif test -f $PDO_OCI_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then\\n***************\\n*** 119,124 ****\\n--- 121,129 ----\\n      10.2)\\n        PHP_ADD_LIBRARY(clntsh, 1, PDO_OCI_SHARED_LIBADD)\\n        ;;\\n+     11.1)\\n+       PHP_ADD_LIBRARY(clntsh, 1, PDO_OCI_SHARED_LIBADD)\\n+       ;;\\n      *)\\n        AC_MSG_ERROR(Unsupported Oracle version! $PDO_OCI_VERSION)\\n        ;;\\n#EOF\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Aplique o patch:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ patch --dry-run -i config.m4.patch && patch -i config.m4.patch && phpize\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Substitua todas as refer\\xEAncias de \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"function_entry\"), \" para \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"zend_function_entry\"), \" em \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pdo_oci.c\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Configure, compile e instale:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ ORACLE_HOME=/opt/oracle/instantclient ./configure --with-pdo-oci=instantclient,/opt/oracle/instantclient,11.1\\n$ make && make test && make install && mv modules/pdo_oci.so /usr/lib/php5/*+lfs/\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Salve este texto em \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/php5/mods-available/pdo_oci.ini\"), \":\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"extension=pdo_oci.so\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Ative a extens\\xE3o:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ php5enmod pdo_oci\\n\")))), mdx(\"p\", null, \"E agora voc\\xEA pode pegar uma x\\xEDcara de caf\\xE9.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"/2014-04-10/a-forma-mais---para-habilitar-conexoes-ao-banco-de-dados-oracle-no-php5-rodando-sobre-o-ubuntu/","next":{"slug":"/2013-07-24/interpretando-urls-com-dom/","title":"Interpretando URLs com DOM"}}},
    "staticQueryHashes": ["1607550725"]}